\ProvidesPackage{frametools}
\RequirePackage{beamerbaserequires}
\RequirePackage{bookmark}
\RequirePackage{etoolbox}
\RequirePackage[absolute,overlay]{textpos} % for textblock environment

%
% Include another people slides
%
\newenvironment{alienframe}[1]{%
  \author{Slide by #1}
  \institute{}
  \begin{frame}
}{%
  \author{\myname}
  \institute[\myshortinstitute]{\myinstitute}
  \end{frame}
}

%
% An environment for backup slides
%
\newenvironment{backupslides}{%
  \appendix
  \newcounter{finalframe}
  \setcounter{finalframe}{\value{framenumber}}

  \begin{frame}
    \begin{center}
      {\Huge Backup slides}
    \end{center}
  \end{frame}
}{%
  \setcounter{framenumber}{\value{finalframe}}
}

%
% Input a file with a beamer frame, that can use \myFrameOverlay variable to select overlays
%
\newcommand\inputover[2]{
  {
    \def\myFrameOverlay{#1}
    \input #2
  }
}

%
% Make list of frames (doesn't work)
%
% \makeatletter
% \newcommand\listofframes{\@starttoc{lbf}}
% \makeatother
%
% \addtobeamertemplate{frametitle}{}{%
%   \addcontentsline{lbf}{section}{\protect\makebox[2em][l]{%
%     \protect\usebeamercolor[fg]{structure}\insertframenumber\hfill}%
%   \insertframetitle\par}%
% }

%
% A text in bottom right corner of the slide
%
\newcommand\FrameText[1]{%
  \begin{textblock*}{\paperwidth}(0pt,0.98\textheight)
    \raggedleft #1\hspace{.5em}
  \end{textblock*}
}

%
% Variable width block
% http://tex.stackexchange.com/questions/12550/changing-default-width-of-blocks-in-beamer
\newenvironment<>{varblock}[2][.9\textwidth]{%
  \setlength{\textwidth}{#1}
  \begin{actionenv}#3%
    \def\insertblocktitle{\centering#2\par}%
    \par%
    \usebeamertemplate{block begin}}%
  {\par%
    \usebeamertemplate{block end}%
  \end{actionenv}%
}

\newenvironment{hlline}[3]{%
  \begin{columns}%
  \begin{column}{#1}\end{column}%
  \begin{column}{#2}%
    \def\insertblocktitle{}%
    \par%
    \usebeamertemplate{block begin}%
    \begin{center}%
    #3
    \end{center}%
    \usebeamertemplate{block end}%
    \end{column}%
    \begin{column}{#1}\end{column}%
  \end{columns}%
}

%
% Add beamer titles to PDF bookmarks
\makeatletter
\apptocmd{\beamer@@frametitle}{\only<1>{\bookmark[page=\the\c@page,level=3]{#1}}}%
{\message{** patching of \string\beamer@@frametitle succeeded **}}%
{\message{** patching of \string\beamer@@frametitle failed **}}%
\makeatother

